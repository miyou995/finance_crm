{% extends "layout/base.html" %}
{% load widget_tweaks %}
{% load static %}
{% load i18n %}
{% load render_table from django_tables2 %}

{% block content %}
<div class="d-block d-md-flex justify-content-between align-items-end mb-4">
    {% include 'snippets/_breadcrumb.html' %}
    {% block create_buttons %}

        {% if perms.transactions.add_misctransaction %}
            <div class="d-flex align-items-end gap-2">
                {% include "snippets/_export_button.html" with  modal_id="export_id" %}
                <button 
                    class="btn btn-success d-flex align-items-center shadow"
                    data-bs-toggle="modal"
                    data-bs-target="#kt_modal"
                    hx-get="{% url 'transactions:create_income' %}"
                    hx-target="#kt_modal_content"
                    hx-swap="innerHTML"
                >
                    <i class="ki-duotone ki-plus fs-4"></i>
                    <span class="fw-semibold">{% trans 'Entr√©e' %}</span>
                </button>
                <button 
                    class="btn btn-danger d-flex align-items-center  shadow"
                    data-bs-toggle="modal"
                    data-bs-target="#kt_modal"
                    hx-get="{% url 'transactions:create_expense' %}"
                    hx-target="#kt_modal_content"
                    hx-swap="innerHTML"
                >
                    <i class="ki-duotone ki-plus fs-4"></i>
                    <span class="fw-semibold">{% trans 'Sortie' %}</span>
                </button>
            </div>
        {% endif %}
    {% endblock create_buttons %}
</div>

{% include "snippets/toolbar.html" %}

<div id="miscTransactionTable" 
    class="table-responsive table-container"
    hx-get="{% url 'transactions:list_misctransaction' %}"
    hx-trigger="refresh_table from:body"
    hx-swap="innerHTML"
    hx-target="closest .table-responsive"
>
	{% render_table table %}
</div>

{% endblock content %}

{% block modal %}
    {% include "popups/export_modal.html" with export_url=export_url modal_id="export_id" %}


{% endblock modal %}
